\section{Convex Optimization Problems}

\subsection{Optimization Problem and Convex Optimization (CO) Problem}

\subsubsection*{Standard Form of Optimization Problem}
$$ \begin{aligned}
    \mathrm{minimize}~~&~~f_0(\mathbf{x}) \\
    \mathrm{subject~to}~~&~~f_i(\mathbf{x}) \leq 0,~i=1,2,\cdots,m \\
        &~~h_i(\mathbf{x}) = 0,~i=1,2,\cdots,p
\end{aligned} $$
\begin{itemize}
    \item Definitions
    \begin{itemize}
        \item Optimization variable: $\mathbf{x} = (x_1,x_2,\cdots,x_n) \in \mathbb{R}^n$
        \item Objective function: $f_0(\mathbf{x}): \mathbb{R}^n \rightarrow \mathbb{R}$
        \item Inequality constraints: $f_i(\mathbf{x}): \mathbb{R}^n \rightarrow \mathbb{R}$, $i=1,2,\cdots,m$
        \item Eqaulity constraints: $h_i(\mathbf{x}): \mathbb{R}^b \rightarrow \mathbb{R}$, $i=1,2,\cdots,p$
    \end{itemize}
    \item Feasibility: $\mathbf{x}$ is called ``feasible'' if both conditions are true:
    \begin{itemize}
        \item $x \in \mathcal{D}(f_0) \cap \left\{ \cap_{i=1}^m \mathcal{D}(f_i) \right\} \cap \left\{ \cap_{i=1}^p \mathcal{D}(h_i) \right\}$
        \item $x \in \left\{ \mathbf{z}~|~f_ii(\mathbf{z}) \leq 0,~i=1,2,\cdots,m,~h_j(\mathbf{z}) = 0,~j=1,2,\cdots,p \right\}$
    \end{itemize}
    \item It will be denoted as $\mathbf{x} \in \mathcal{F}$ if $\mathbf{x}$ is feasible (Only in this material)
\end{itemize}

\subsubsection*{Global Optimality and Local Optimality}
\begin{itemize}
    \item (Global) Optimal: $\mathbf{x}^{\ast} \in \mathcal{F}$: feasible, $\forall \mathbf{x} \in \mathcal{F}$,
        $f_0(\mathbf{x}^{\ast}) \leq f_0(\mathbf{x})$ $\Rightarrow$ $\mathbf{x}^{\ast}$: (global) optimal
    \item Locally Optimal: $\exists~R > 0$ s.t. $\mathbf{x}^{\ast}$ is optimal for the following problem $\Rightarrow$:
        $\mathbf{x}^{\ast}$: locally optimal
        $$ \begin{aligned}
            \mathrm{minimize}~~&~~f_0(\mathbf{x}) \\
            \mathrm{subject~to}~~&~~f_i(\mathbf{x}) \leq 0,~i=1,2,\cdots,m \\
                &~~h_i(\mathbf{x}) = 0,~i=1,2,\cdots,p \\
                &~~\Vert \mathbf{x} - \mathbf{x}^{\ast} \Vert \leq R
        \end{aligned} $$
    \item $X_{\mathrm{opt}}$: Set of optimal points
    \begin{itemize}
        \item Example: $f(x) = \sin x$ has infinitely many optimal points
    \end{itemize}
    \item Optimal value: $p^{\ast} = \inf_{\mathbf{x} \in \mathcal{F}} f_0(\mathbf{x})$
    \begin{itemize}
        \item Optimal value always exist. $-\infty$ is also a possible value
    \end{itemize}
\end{itemize}
\newpage

\subsubsection*{Convex Optimization Problem}
$$ \begin{aligned}
    \mathrm{minimize}~~&~~f_0(\mathbf{x}) \\
    \mathrm{subject~to}~~&~~f_i(\mathbf{x}) \leq 0,~i=1,2,\cdots,m \\
        &~~\mathbf{a}_i^T \mathbf{x} = b_i,~i=1,2,\cdots,p
\end{aligned} $$
\begin{itemize}
    \item $f_i$: convex
    \item Equality constraints: affine
    \item $\mathbf{a}_i^T \mathbf{x} = b_i$ can be simply written in $A\mathbf{x} = \mathbf{b}$
        where $A \in \mathbb{R}^{p \times n}$, $\mathbf{b} \in \mathbb{R}^p$ when $\mathbf{x} \in \mathbb{R}^{n}$
\end{itemize}

\subsection{Optimality Conditions in CO}

\subsubsection*{Local and Global Optimizer in CO}
\textbf{Theorem:} If a point is locally optimal in CO, it is globally optimal as well

\subsubsection*{First-Order Condition}
\begin{itemize}
    \item In CO, $\mathbf{x}^{\ast} \in \mathcal{F}$: optimal $\Leftrightarrow$
        $$ \forall~\mathbf{x} \in \mathcal{F},~\nabla f_0 \left(\mathbf{x}^{\ast}\right)^T \left( \mathbf{x} - \mathbf{x}^{\ast} \right) \geq 0 $$
    \item Unconstrained CO: $\mathbf{x}^{\ast} \in \mathcal{F}$: optimal
        $\Leftrightarrow$ $\nabla f_0 \left(\mathbf{x}^{\ast}\right) = \mathbf{0}$
        $$ \begin{aligned}
            \mathrm{minimize}~~&~~f_0(\mathbf{x}) \\
            \mathrm{subject~to}~~&~~\mathbf{x} \in \mathbb{R}^n
        \end{aligned} $$
    \item Equality Constrained CO
        $$ \begin{aligned}
            \mathrm{minimize}~~&~~f_0(\mathbf{x}) \\
            \mathrm{subject~to}~~&~~A\mathbf{x} = \mathbf{b}
        \end{aligned} $$
    \begin{itemize}
        \item $\mathbf{x}^{\ast} \in \mathcal{F}$: optimal $\Leftrightarrow$
            $\nabla f_0 \left(\mathbf{x}^{\ast}\right) + A^T \nu = 0$
        \item $\mathbf{x}$: primal variable, $\nu$: dual variable
    \end{itemize}
    \item Minimization Over Positive Orthant
        $$ \begin{aligned}
            \mathrm{minimize}~~&~~f_0(\mathbf{x}) \\
            \mathrm{subject~to}~~&~~\mathbf{x} \geq 0
        \end{aligned} $$
    \begin{itemize}
        \item $\mathbf{x}^{\ast} \in \mathcal{F}$: optimal $\Leftrightarrow$ $\mathbf{x}^{\ast} \geq 0$,
            $\nabla f_0 \left(\mathbf{x}^{\ast}\right) \geq 0$, $\left(\nabla f_0\left(\mathbf{x}^{\ast}\right)\right)_i x_i^{\ast} = 0$
        \item $\left(\nabla f_0\left(\mathbf{x}^{\ast}\right)\right)_i x_i^{\ast} = 0$: Complementary condition
    \end{itemize}
\end{itemize}
\newpage

\subsection{Equivalent Convex Problems}

\subsubsection*{Removing Equality Constraints}
$$ \begin{aligned}
    \mathrm{minimize}~~&~~f_0(\mathbf{x}) \\
    \mathrm{subject~to}~~&~~f_i(\mathbf{x}) \leq 0~~(i \in \mathbb{Z} \cap [1,m])\\
        &~~A\mathbf{x} = \mathbf{b}
\end{aligned}~~~\Leftrightarrow~~~\begin{aligned}
    \mathrm{minimize}~~&~~f_0(F\mathbf{z} + \mathbf{x}_0) \\
    \mathrm{subject~to}~~&~~f_i(F\mathbf{z} + \mathbf{x}_0) \leq 0~~(i \in \mathbb{Z} \cap [1,m]) \\ {}
\end{aligned} $$
\begin{itemize}
    \item Minimize over $\mathbf{z}$, $A\mathbf{x} = \mathbf{b}$ $\Leftrightarrow$ $\mathbf{x} = F\mathbf{z} + \mathbf{x}_0$
    \item Columns of $F$ span $\mathcal{N}(A)$
\end{itemize}

\subsubsection*{Introducing Equality Constraints}
$$ \begin{aligned}
    \mathrm{minimize}~~&~~f_0(A_0\mathbf{x}_0 + \mathbf{b}_0) \\
    \mathrm{subject~to}~~&~~f_i(A_i\mathbf{x}_i + \mathbf{b}_i) \leq 0~~(i \in \mathbb{Z} \cap [1,m]) \\ {}
\end{aligned}~~~\Leftrightarrow~~~\begin{aligned}
    \mathrm{minimize}~~&~~f_0(\mathbf{y}_0) \\
    \mathrm{subject~to}~~&~~f_i(\mathbf{y}_i) \leq 0 \\
        &~~\mathbf{y}_i = A_i \mathbf{x} + \mathbf{b}_i~~(i \in \mathbb{Z} \cap [0,m])
\end{aligned} $$

\subsubsection*{Introducing Slack Variables}
$$ \begin{aligned}
    \mathrm{minimize}~~&~~f_0(\mathbf{x}) \\
    \mathrm{subject~to}~~&~~\mathbf{a}_i^T \mathbf{x} \leq b_i~~(i \in \mathbb{Z} \cap [1,m]) \\ {}
\end{aligned}~~~\Leftrightarrow~~~\begin{aligned}
    \mathrm{minimize}~~&~~f_0(\mathbf{x}) \\
    \mathrm{subject~to}~~&~~\mathbf{a}_i^T \mathbf{x} + s_i \leq b_i~~(i \in \mathbb{Z} \cap [1,m]) \\
        &~~ s_i \geq 0~~(i \in \mathbb{Z} \cap [1,m])
\end{aligned} $$
\begin{itemize}
    \item Minimize over $\mathbf{x}$ and $s_i$
\end{itemize}

\subsubsection*{Epigraph Form}
\begin{itemize}
    \item Any CO is equivalent to
        $$ \begin{aligned}
            \mathrm{minimize}~~&~~t~(t \in \mathbb{R}) \\
            \mathrm{subject~to}~~&~~f_0(\mathbf{x}) - t \leq 0 \\
                &~~f_i(\mathbf{x}) \leq 0~~(i \in \mathbb{Z} \cap [1,m]) \\
                &~~ A\mathbf{x} = \mathbf{b}
        \end{aligned} $$
    \item Minimize overe $\mathbf{x}$ and $t$
    \item This converts all CO having linear objective $(\mathbf{x}, t)$
\end{itemize}

\subsubsection*{Minimizing Over Some Variables}
$$ \begin{aligned}
    \mathrm{minimize}~~&~~f_0(\mathbf{x}_1, \mathbf{x}_2) \\
    \mathrm{subject~to}~~&~~f_i(\mathbf{x}_1) \leq 0~~(i \in \mathbb{Z} \cap [1,m])
\end{aligned}~~~\Leftrightarrow~~~\begin{aligned}
    \mathrm{minimize}~~&~~\tilde{f}_0(\mathbf{x}_1) \\
    \mathrm{subject~to}~~&~~f_i(\mathbf{x}_1) \leq 0~~(i \in \mathbb{Z} \cap [1,m])
\end{aligned} $$
\begin{itemize}
    \item $\tilde{f}_0(\mathbf{x}_1) = \inf_{\mathbf{x}_2} f_0 (\mathbf{x}_1, \mathbf{x}_2)$
\end{itemize}

\subsection{Linear Program}

\subsubsection*{Linear Program (LP)}
$$ \begin{aligned}
    \mathrm{minimize}~~&~~\mathbf{c}^T \mathbf{x} + d \\
    \mathrm{subject~to}~~&~~G\mathbf{x} \geq \mathbf{h} \\
        &~~A\mathbf{x} = \mathbf{b}
\end{aligned} $$
\begin{itemize}
    \item Convex problem with affine objective and constraint functions
    \item $\mathcal{F}$ is a polyhedron
\end{itemize}

\subsubsection*{Examples}
\begin{itemize}
    \item Diet problem: Choose quantities $x_1$, $x_2$, $\cdots$, $x_n$ of $n$ foods
    $$ \begin{aligned}
        \mathrm{minimize}~~&~~\mathbf{c}^T \mathbf{x} \\
        \mathrm{subject~to}~~&~~A\mathbf{x} \geq \mathbf{b},~\mathbf{x} \geq 0
    \end{aligned} $$
    \begin{itemize}
        \item One unit of food $j$ costs $c_j$, contains amount of $a_{ij}$ of nutrients
        \item Healthy diet requires nutrient $i$ in quantity at least $b_i$
    \end{itemize}
    \item Piecewise linear minimization
    $$ \begin{aligned}
        \mathrm{minimize}~~&~~\max_{i \in \mathbb{Z} \cap [1,m]} \left\{ \mathbf{a}_i^T\mathbf{x} + \mathbf{b}_i \right\} \\ {}
    \end{aligned}~~~\Leftrightarrow~~~\begin{aligned}
        \mathrm{minimize}~~&~~t \\
        \mathrm{subject~to}~~&~~Ax + B \leq t\mathbf{1}~~(i \in \mathbb{Z} \cap [1,m])
    \end{aligned} $$
    \item Chebyshev Center: Center of the largest inscribed ball $\mathcal{B} = \left\{\mathbf{x}_C+\mathbf{u}~|~\Vert\mathbf{u}\Vert_2\leq r \right\}$
        of a polyhedron $\mathcal{P} = \left\{\mathbf{x}~|~A\mathbf{x}\leq\mathbf{b} \right\}$
    $$ \begin{aligned}
        \mathrm{maximize}~~&~~r \\
        \mathrm{subject~to}~~&~~\mathbf{a}_i^T \mathbf{x}_C + r\Vert\mathbf{a}_i\Vert_2\leq\mathbf{b}_i~~(i \in \mathbb{Z} \cap [1,m])
    \end{aligned} $$
\end{itemize}

\subsubsection*{Linear Fractional Programming}
$$ \begin{aligned}
    \mathrm{minimize}~~&~~\phi(\mathbf{x}) = \frac {\mathbf{c}^T\mathbf{x} + d} {\mathbf{e}^T \mathbf{x} + f} \\
    \mathrm{subject~to}~~&~~A\mathbf{x} \leq \mathbf{b} \\ {} \\ {}
\end{aligned}~~~\Leftrightarrow~~~\begin{aligned}
    \mathrm{minimize}~~&~~\mathbf{c}^T\mathbf{y} + d\mathbf{z} \\
    \mathrm{subject~to}~~&~~A\mathbf{y} - b\mathbf{z} \leq 0 \\
        &~~\mathbf{e}^T\mathbf{y} + f\mathbf{z} = 1\\
        &~~\mathbf{z} > 0
\end{aligned} $$
\begin{itemize}
    \item $\mathcal{\phi} = \left\{\mathbf{x}~|~\mathbf{e}^T\mathbf{x} + f > 0 \right\}$
    \item Take $\mathbf{y} = \frac 1 {\mathbf{e}^T\mathbf{x} + f}\mathbf{x}$, $z = \frac 1 {\mathbf{e}^T\mathbf{x} + f}$
\end{itemize}

\subsection{Quadratic Program}

\subsubsection*{Quadratic Program (QP)}
$$ \begin{aligned}
    \mathrm{minimize}~~&~~\frac 1 2 \mathbf{x}^TP\mathbf{x} + \mathbf{q}^T\mathbf{x} + r \\
    \mathrm{subject~to}~~&~~G\mathbf{x} \geq \mathbf{h} \\
        &~~A\mathbf{x} = \mathbf{b}
\end{aligned} $$
\begin{itemize}
    \item $P \in \mathbb{S}^n_+$ $\Rightarrow$ Objective function: convex
    \item Concave QP is NP-hard
\end{itemize}

\subsubsection*{Examples}
\begin{itemize}
    \item Unconstrained QP: $\mathrm{minimize}~~~~\frac 1 2 \mathbf{x}^TP\mathbf{x} + \mathbf{q}^T\mathbf{x} + r$
    \begin{itemize}
        \item Assume $Q \succ 0$ i.e. given problem is convex QP
        \item First-order condition: $0 = \nabla f_0(\mathbf{x}^{\ast}) = P\mathbf{x}^{\ast} + \mathbf{q}$
            i.e. optimal solution is $\mathbf{x}^{\ast} = -P^{-1}\mathbf{q}$
    \end{itemize}
    \item Least-squares: $\mathrm{minimize}~~~~\Vert A\mathbf{x} - \mathbf{b} \Vert_2^2$
    \begin{itemize}
        \item $\mathbf{x}^{\ast} = \left(A^TA\right)^{-1}A^T\mathbf{b} = A^{\ast}\mathbf{b}$ ($A^{\ast}$: Left inverse of $A$ i.e. $A^{\ast}A = I$)
    \end{itemize}
    \item LP with Random Cost
    $$ \begin{aligned}
        \mathrm{minimize}~~&~~
            \mathbb{E}\left[ \mathbf{c}^T\mathbf{x} \right] + \gamma \mathrm{Var}\left[ \mathbf{c}^T \mathbf{x} \right]
            = \overline{\mathbf{c}}^T\mathbf{x} + \gamma \mathbf{x}^T \Sigma \mathbf{x} \\
        \mathrm{subject~to}~~&~~G\mathbf{x} \geq \mathbf{h},~A\mathbf{x} = \mathbf{b}
    \end{aligned} $$
    \begin{itemize}
        \item $\mathbf{c}$: random vector with mean $\overline{\mathbf{c}}$ and covariance matrix $\Sigma$
        \item $\mathbf{c}^T\mathbf{x}$: random variable with mean $\overline{\mathbf{c}}^T\mathbf{x}$ and variance $\mathbf{x}^T\Sigma\mathbf{x}$
        \item $\Sigma = \mathbb{E}\left[\left(\mathbf{c}_i - \overline{\mathbf{c}}_i\right)\left(\mathbf{c}_j - \overline{\mathbf{c}}_j\right)\right] \succeq 0$
            i.e. Given problem is convex QP
        \item $\gamma > 0$: risk aversion parameter; Minimizes covariance when $\gamma \rightarrow 0$ and minimizes mean when $\gamma \rightarrow \infty$
    \end{itemize}
\end{itemize}

\subsubsection*{Quadratically Constrained Quadratic Program (QCQP)}
$$ \begin{aligned}
    \mathrm{minimize}~~&~~\frac 1 2 \mathbf{x}^TP_0\mathbf{x} + \mathbf{q}_0^T\mathbf{x} + r_0 \\
    \mathrm{subject~to}~~&~~\frac 1 2 \mathbf{x}^TP_i\mathbf{x} + \mathbf{q}_i^T\mathbf{x} + r_i \leq 0~~(i \in \mathbb{Z} \cap [1,m]) \\
        &~~A\mathbf{x} = \mathbf{b}
\end{aligned} $$
\begin{itemize}
    \item $P_i \in \mathbb{S}^n_{+}$ i.e. Objective and inequality constraints are convex quadratic
    \item If $P_1$, $P_2$, $\cdots$, $P_m \in \mathbb{S}^n_{++}$, $\mathcal{F}$ is intersection of $m$ ellipsoids and an affine set
    \item Example
    $$ \begin{aligned}
        \mathrm{minimize}~~&~~(x_1 - 1)^2 + (x_2 - 2)^2 \\
        \mathrm{subject~to}~~&~~\frac {x_1^2} 4 + \frac {x_2^2} 9 \leq 1
    \end{aligned} $$
\end{itemize}
